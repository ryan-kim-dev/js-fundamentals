# 23.11.23 TIL

## 모딥다 13장. 스코프

### 13.1 스코프란?

- 스코프 : 식별자의 유효 범위, 또는 식별자를 검색할 때 사용되는 규칙
- 식별자 결정 : 자바스크립트 엔진은 이름이 같은 두 식별자가 있다면 둘 중 어떤 것을 참조해야 할 지 스코프를 기준으로 결정한다. 이것을 식별자 결정이라고 한다.
- 모든 식별자는 **자신이 선언된 위치**에 따라 다른 코드가 자신을 참조할 수 있는 유효 범위(스코프)가 결정된다.
- 렉시컬 환경 : 코드의 스코프와 실행 컨텍스트를 관리하는데 사용되는 내부 매커니즘 (자료구조)

### 13.2 스코프의 종류

- 전역 스코프 : 코드의 가장 바깥 영역을 말한다. 전역에 선언된 변수는 어디서든지 참조할 수 있다.
- 지역 스코프 : 코드블럭이나(let, const), 함수 몸체 내부(var)를 말한다. 지역에 선언된 변수는 자신의 지역 스코프와 하위 지역 스코프에서만 참조할 수 있다.

### 13.3 스코프 체인

- 스코프 체인 : 지역 스코프로부터 최상위 전역 스코프 까지 스코프가 계층적으로 연결된 것
- 자바스크립트는 식별자를 참조할 때 스코프 체인을 통해 해당 식별자를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 식별자를 검색한다.
- 스코프 체인을 통해 상위 스코프에서 선언한 변수를 하위 스코프에서도 참조할 수 있다. (반대 방향으로 상위 스코프에서 하위 스코프의 식별자를 참조할 수는 없다.)

### 13.4 함수 레벨 스코프

`var` 키워드로 선언된 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정한다. 이러한 특징을 함수 레벨 스코프라고 한다.

### 13.5 렉시컬 스코프

- 동적 스코프 : 함수의 상위 스코프는 함수를 **어디서 호출했는지**에 따라 동적으로 결정된다.
- 정적 스코프(렉시컬 스코프) : 함수의 상위 스코프는 함수를 **어디서 정의했는지**에 따라 정적으로 결정된다.
- 자바스크립트는 렉시컬 스코프를 따르므로 함수를 어디서 호출했는지가 아니라 어디서 정의했는지에 따라 상위 스코프를 결정한다.
  - 즉 함수의 상위 스코프는 언제나 자신이 정의된 스코프다.
  - 함수 선언문 또는 함수 표현식으로 함수 정의가 실행되어 생성된 함수 객체는 이렇게 결정된 상위 스코프를 기억한다.
  - 함수가 호출될 때마다 함수의 상위 스코프를 참조할 필요가 있기 때문이다.
